### Базовая настройка локального и сетевого репозиториев ###

1. После установки вам доступен репозиторий с установочного диска.    
Чтобы убедиться, что диск доступен, проверьте настройки виртуальной машины, в которых устройство CD/DVD (IDE) должно быть полностью включено.    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image20.png)    

2. После этого, необходимо выполнить команду проверки пакетов в содержащихся в локальном репозитории:    
**apt-cdrom add**    

3. Проверить наличие пакетов и их статус в системе поможет команда:    **apt list**    
Если дисков с дистрибутивом Debian несколько, можно последовательно их вставляя в CD-ROM добавлять содержащиеся в них пакеты через apt-cdrom add

4. Если есть доступ к Интернет, возможна  установка новых и исправленных пакетов новых напрямую из онлайн репозиториев. Для чего сделаем эти репозитории доступными нашей системе.

    Открываем файл со списком репозиторием:   **nano /etc/apt/source.list**    
Внизу есть две закомментированные через символ **#** строчки, которые надо раскомментировать, убрав символ **#** и одну из них необходимо ввести еще раз, с небольшими изменениями.    

    deb http://deb.debian.org/debian buster-updates main contrib    
deb http://deb.debian.org/debian buster main contrib    
deb-src http://deb.debian.org/debian buster-updates main contrib    

    **...было:**![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image19.png)    
**..cтало:**![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image4.png)    

    Внимание, при установке GUI данный файл может быть неполным, так как в графический пакет входит свой установщик пакетов. Если есть необходимость устанавливать пакеты через интерфейс командной строки, необходимо вручную дополнить файл адресами онлайн репозиториев

5. Последним шагом для работы с онлайн репозиториям, при наличии настроенного подключение к интернет, будет введение двух команд.    
Команда для обновления листа доступных репозиториев: **apt update**    
Команда для обновления доступных пакетов в репозиториях: **apt upgrade**    

### Базовая настройка сети на Debian 10 ###

1. Настройку сетевых интерфейсов можно производить несколькими способами.    
Мы рассмотрим вариант настройки через программную утилиту **nmtui**    

    Для начала проверим, не была ли ранее предпринята попытка настройки через конфигурационный файл, так как некоторые программные утилиты могли внести в него свои изменения.

    Открываем файл:   **nano /etc/network/interfaces**    
В нем должен быть прописан только интерфейс **loopback**    
Если прописан еще какой либо интерфейс, рекомендую закоментировать его так, как показано на скришоте.    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image11.png)    

    После этого установить пакет с nmtu:   **apt install network-manager**    
И перезагрузить ОС: **reboot**    

2. После перезагрузки запускаем утилиту **nmtui**    
Настройка сетевых подключений находится в меню “Edit a connection”    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image9.png)    

    Смена меню происходит стрелками, подтверждение выбора клавишей “Enter” 

    Если на предыдущих шагах всё было сделано правильно, то на хосте с двумя сетевыми картами в меню настройке мы увидим оба интерфейса. Называться они будут, как “Wired connection 2” и “Wired connection 1”    

    Выбирая для настройки один из них, нужно хорошо понимать, какой именно вы собираетесь настраивать. Посмотрите в настройках виртуальных хостов MAC адрес интерфейсов через клавишу Advanced…![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image2.png)     

    К примеру 
**NAT** (Internet + DHCP)![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image7.png)    
**LAN** (локальная сеть)![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image5.png)    

    Теперь для настройки выбираем нужный нам интерфейс, по умолчанию все они стоят в режим автоматического получения адреса (DHCP)
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image17.png)    

    Сравнив MAC наших сетевых карт, можем заметить, что выбранная нами должна работать через DHCP с доступом в интернет. Выходим через <Cancel>

3. Настроим на втором интерфейсе статическую адресацию по заданию.    
В открывшемся меню выбираем <Show> напротив IPv4 CONFIGURATION    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image18.png)    

    Затем меняем тип получения адрес с “Automati” на “Manual”    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image8.png)    

    В поле <Add…> вводим IPv4 адрес с маской в формате: (IP address)/Prefix    
В поле Gateway IPv4 адрес шлюза по умолчанию (если необходимо)    
В DNS servers указываем необходимые нам адреса DNS серверов    
В поле Search domain вводим домен к которому принадлежит данный хост    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image16.png)    

    Проверяем, что выбран режим автоматического старта интерфейса после перезагрузки, [X] Automatically connect и выводим через <OK> и <Back>

    Для корректного применения внесенных изменений идем в меню “Activate a connection” и выбрав необходимый интерфейс, справа, сначала выключаем его <Deactivate>, потом включаем <Activate>, затем <Back> и <Ok>

    Проверка настроек IPv4 адресации через команду:     **ip a**

### Включение маршрутизации и настройка NAT ###    

1. Первым действием необходимо разрешить маршрутизацию пакетов на внутренних интерфейсах, для чего вносим изменения в файл 
**/etc/sysctl.conf**    

    Внутри файла раскомментируем строчку или вводим вручную:
**net.ipv4.ip_forward=1**


    После сохранения файла применяем настройку командой:   **sysctl -p**    
Выключаем службу защиты сетевых подключений apparmor:    
**systemctl stop apparmor** --	останавливаем службу    
**systemctl disable apparmor** -- отменяем перезапуск службы    

2. Включаем NAT для внутренних сетей на интерфейсе провайдера через ***iptables***:    
**iptables -t nat -A POSTROUTING -o <интерфейс интернет> -j MASQUERADE**
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image1.png)    

    Настраиваем автозапуск NAT после перезагрузки компьютера.    
Создаем файл с правилом:    **nano /etc/network/if-pre-up.d/nat**    

    **#!/bin/bash    
iptables -t nat -A POSTROUTING -o <интерфейс интернет> -j MASQUERADE**    

    Делаем исполняемым при перезагрузке:    
**chmod +x /etc/network/if-pre-up.d/nat**    

3. Можно настроить нат альтернативным способом, через nftables, установив сначала пакет:    
**apt install nftables**

    Вносим в настройку NAT в файл конфигурации:    nano /etc/nftables.conf
Дописываем в конец файла следующие строки:    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/123.jpg)    
	
    После сохранения изменений перезапускаем службу nftables:    
**systemctl restart nftables.service**
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image10.png)    
	
    **Внимание!!! **    
Это не единственный способ настроить NAT через nftables или iptables.     
Остальные варианты настройки  можно самостоятельно изучить в Internet    
	
### Создание пользователей, групп, папок и файлов. Изменение прав к ним. ###

1. Пользователь в Debian создается командой:       **adduser <имя пользователя>**    
После применения команды будет создан необходимый набор правил и домашняя папка пользователя и запрошен его пароль.    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image23.png)    
	
    После этого система попросит заполнить карточку пользователя с его данными, это не обязательно и можно просто нажимать “Enter”, а затем подтвердить корректность введенной информации.

    **Внимание!!!** В Linux, особенно в CentOS,для создания пользователя часто используют команду useradd <имя пользователя>. Не используйте эту команду для создания пользователя в ОС Debian. Пользователь будет создан, но без домашней папки и переменных среды окружения и не сможет нормально работать с системой.
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image15.png)    

    Проверка существующих в системе пользователей может производиться просмотром конфигурационного файла    **cat /etc/passwd**    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image21.png)    

2. Папка создается командой mkdir <путь куда создается папка>

    **mkdir /study/test_dir**    
создаст папку test_dir в находящейся в корневой директории папке **study**    
**mkdir ./test_dir**    
создаст папку **test_dir** в текущей папке пользователя    

3. Создание пустого файла командой:   **touch /study/test_dir/<имя файла>**    

    Создание файла редактором: **nano /study/test_dir/<имя файла>**, после чего необходимо внести в файл данные и выйти с сохранением.

    Создание файла перенаправлением: **echo 1 > /study/test_dir/<имя файла>**, будет создан файл с содержимым **“1”**.    
Символ **“>”** в команде echo создает или перезаписывает файл, использование **“>>”** позволяет добавить запись в конец файла.     


4. **chmod - -help** (справка по команде изменения прав доступа)     
**chown - - help** (справка по команде изменяющей владельца папки)    
	
5. Добавление пользователей в группу

    Для начала создадим группу, если нет необходимой:  **groupadd  <имя группы>**    
	**Подробнее:** <a href="https://losst.ru/kak-sozdat-gruppu-linux">Как создать группу Linux</a>    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image15.png)    
	
    Добавить пользователя: **usermod  -a -G  <имя группы> <имя пользователя>**    
**Подробнее:** <a href="https://losst.ru/kak-dobavit-polzovatelya-v-gruppu-linux">Как добавить пользователя в группу</a>    

6. Проверка информации о пользователях:    
**cat /etc/passwd** - показывает пользователей системы, их ID и домашнии папки
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image3.png)    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image22.png)    

    **id <пользователь>** - ID пользователя и группы в которых он состоит с ID    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image6.png)    

    **groups <пользователь>** - имя пользователя и имена групп в которых состоит    
![Alt-текст](https://github.com/WSRGUVD/debian_ubunta/blob/main/images/02/image14.png)    

